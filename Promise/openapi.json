{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"ping","summary":"ping","description":"서버 상태를 확인합니다.","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntryDTO"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["App"]}},"/auth/login":{"post":{"operationId":"login","summary":"login","description":"로그인 / 회원가입을 수행합니다.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputCreateUserDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthTokenDTO"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Auth"]}},"/auth/refresh":{"post":{"operationId":"refreshTokens","summary":"refreshTokens","description":"인증 토큰을 갱신합니다.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputRefreshTokenDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthTokenDTO"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Auth"]}},"/user/profile":{"get":{"operationId":"getMyProfile","summary":"getMyProfile","description":"로그인한 사용자 정보를 불러옵니다.","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["User"],"security":[{"bearer":[]}]},"put":{"operationId":"updateMyProfile","summary":"updateMyProfile","description":"로그인한 사용자 정보를 수정합니다.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputUpdateUserDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["User"],"security":[{"bearer":[]}]},"delete":{"operationId":"deleteMyProfile","summary":"deleteMyProfile","description":"로그인한 사용자 정보를 삭제합니다.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputDeleteUserDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OutputDeleteUserDTO"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["User"],"security":[{"bearer":[]}]}},"/promises":{"get":{"operationId":"getMyPromises","summary":"getMyPromises","description":"내가 참여한 약속 목록을 불러옵니다.","parameters":[{"name":"status","required":false,"in":"query","schema":{"enum":["all","available","unavailable"],"type":"string"}},{"name":"role","required":false,"in":"query","schema":{"enum":["all","host","attendee"],"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PromiseDTO"}}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]},"post":{"operationId":"createPromise","summary":"createPromise","description":"약속을 생성합니다.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputCreatePromiseDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicPromiseDTO"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]}},"/promises/{pid}":{"get":{"operationId":"getPromise","summary":"getPromise","description":"약속 상세 정보를 불러옵니다.","parameters":[{"name":"pid","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicPromiseDTO"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]},"put":{"operationId":"updatePromise","summary":"updatePromise","description":"약속을 수정합니다.","parameters":[{"name":"pid","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputUpdatePromiseDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicPromiseDTO"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]}},"/promises/{pid}/attendees":{"post":{"operationId":"attendPromise","summary":"attendPromise","description":"약속에 참여합니다.","parameters":[{"name":"pid","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"201":{"description":""},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]},"delete":{"operationId":"leavePromise","summary":"leavePromise","description":"약속을 떠납니다.","parameters":[{"name":"pid","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]}},"/promises/{pid}/start-location":{"get":{"operationId":"getStartLocation","summary":"getStartLocation","description":"약속 출발지를 불러옵니다.","parameters":[{"name":"pid","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LocationDTO"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]},"post":{"operationId":"updateStartLocation","summary":"updateStartLocation","description":"약속 출발지를 설정합니다.","parameters":[{"name":"pid","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputLocationDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]},"delete":{"operationId":"deleteStartLocation","summary":"deleteStartLocation","description":"약속 출발지를 삭제합니다.","parameters":[{"name":"pid","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]}},"/promises/themes":{"get":{"operationId":"getThemes","summary":"getThemes","description":"약속 테마 목록을 불러옵니다.","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ThemeDTO"}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]}},"/promises/queue":{"get":{"operationId":"dequeuePromise","summary":"dequeuePromise","description":"약속 대기열을 확인합니다.","parameters":[{"name":"deviceId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]},"post":{"operationId":"enqueuePromise","summary":"enqueuePromise","description":"약속 대기열에 추가합니다.","parameters":[{"name":"pid","required":true,"in":"query","schema":{"type":"number"}},{"name":"deviceId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"201":{"description":""},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["Promise"],"security":[{"bearer":[]}]}},"/upload/image":{"post":{"operationId":"uploadImageFile","summary":"uploadImageFile","description":"이미지 파일을 업로드합니다.","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OutputUploadFileDTO"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpException"}}}}},"tags":["FileUpload"],"security":[{"bearer":[]}]}}},"info":{"title":"Promise API","description":"","version":"0.0.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"type":"http","scheme":"bearer"}},"schemas":{"EntryDTO":{"type":"object","properties":{"message":{"type":"string","example":"pong"},"version":{"type":"string","example":"1.0.0"},"build":{"type":"string","example":"2024-03-16T06:47:20Z"},"deploy":{"type":"string","example":"2024-03-16T06:47:20Z"},"env":{"type":"string","example":"development"},"tz":{"type":"string","example":"UTC"}},"required":["message","version","build","deploy","env","tz"]},"HttpException":{"type":"object","properties":{"message":{"type":"string","example":"Error message"},"error":{"type":"string","example":"HTTP status message"},"statusCode":{"type":"number","example":"HTTP status code"}},"required":["message","error","statusCode"]},"InputCreateUserDTO":{"type":"object","properties":{"username":{"type":"string","nullable":true,"minLength":1,"maxLength":80,"example":"probee"},"profileUrl":{"type":"string","nullable":true,"example":"https://profile-url.png"},"provider":{"enum":["KAKAO","GOOGLE","APPLE"],"type":"string","example":"KAKAO"},"providerId":{"type":"string","minLength":1,"maxLength":100,"example":"1234567890"}},"required":["provider","providerId"]},"AuthTokenDTO":{"type":"object","properties":{"accessToken":{"type":"string","example":"access token"},"refreshToken":{"type":"string","example":"refresh token"}},"required":["accessToken","refreshToken"]},"InputRefreshTokenDTO":{"type":"object","properties":{"refreshToken":{"type":"string","example":"refresh token"}},"required":["refreshToken"]},"UserDTO":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string","nullable":true},"profileUrl":{"type":"string","nullable":true},"provider":{"enum":["KAKAO","GOOGLE","APPLE"],"type":"string"},"createdAt":{"format":"date-time","type":"string"}},"required":["id","username","profileUrl","provider","createdAt"]},"InputUpdateUserDTO":{"type":"object","properties":{"username":{"type":"string","nullable":true,"minLength":1,"maxLength":80,"example":"probee"},"profileUrl":{"type":"string","nullable":true,"example":"https://profile-url.png"}}},"InputDeleteUserDTO":{"type":"object","properties":{"reason":{"type":"string","minLength":10,"maxLength":200,"example":"탈퇴 사유"}},"required":["reason"]},"OutputDeleteUserDTO":{"type":"object","properties":{"id":{"type":"number"}},"required":["id"]},"HostDTO":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string","nullable":true},"profileUrl":{"type":"string","nullable":true}},"required":["id","username","profileUrl"]},"LocationDTO":{"type":"object","properties":{"latitude":{"type":"number"},"longitude":{"type":"number"},"id":{"type":"number"},"city":{"type":"string","nullable":true},"district":{"type":"string","nullable":true},"address":{"type":"string","nullable":true}},"required":["latitude","longitude","id","city","district","address"]},"AttendeeDTO":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string","nullable":true},"profileUrl":{"type":"string","nullable":true}},"required":["id","username","profileUrl"]},"PromiseDTO":{"type":"object","properties":{"host":{"$ref":"#/components/schemas/HostDTO"},"themes":{"type":"array","items":{"type":"string"}},"destination":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/LocationDTO"}]},"attendees":{"type":"array","items":{"$ref":"#/components/schemas/AttendeeDTO"}},"id":{"type":"number"},"pid":{"type":"string"},"title":{"type":"string"},"destinationType":{"enum":["STATIC","DYNAMIC"],"type":"string"},"locationShareStartType":{"enum":["DISTANCE","TIME"],"type":"string"},"locationShareStartValue":{"type":"number"},"locationShareEndType":{"enum":["DISTANCE","TIME"],"type":"string"},"locationShareEndValue":{"type":"number"},"promisedAt":{"format":"date-time","type":"string"},"completedAt":{"format":"date-time","type":"string","nullable":true},"createdAt":{"format":"date-time","type":"string"}},"required":["host","themes","destination","attendees","id","pid","title","destinationType","locationShareStartType","locationShareStartValue","locationShareEndType","locationShareEndValue","promisedAt","completedAt","createdAt"]},"PublicPromiseDTO":{"type":"object","properties":{"host":{"$ref":"#/components/schemas/HostDTO"},"themes":{"type":"array","items":{"type":"string"}},"destination":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/LocationDTO"}]},"attendees":{"type":"array","items":{"$ref":"#/components/schemas/AttendeeDTO"}},"id":{"type":"number"},"pid":{"type":"string"},"title":{"type":"string"},"destinationType":{"enum":["STATIC","DYNAMIC"],"type":"string"},"locationShareStartType":{"enum":["DISTANCE","TIME"],"type":"string"},"locationShareStartValue":{"type":"number"},"locationShareEndType":{"enum":["DISTANCE","TIME"],"type":"string"},"locationShareEndValue":{"type":"number"},"promisedAt":{"format":"date-time","type":"string"},"completedAt":{"format":"date-time","type":"string","nullable":true},"createdAt":{"format":"date-time","type":"string"}},"required":["host","themes","destination","attendees","id","pid","title","destinationType","locationShareStartType","locationShareStartValue","locationShareEndType","locationShareEndValue","promisedAt","completedAt","createdAt"]},"InputLocationDTO":{"type":"object","properties":{"city":{"type":"string","minLength":2,"maxLength":50,"example":"서울"},"district":{"type":"string","minLength":2,"maxLength":50,"example":"강남구"},"address":{"type":"string","maxLength":100,"example":"강남대로 123"},"latitude":{"type":"number","example":37.123456},"longitude":{"type":"number","example":127.123456}},"required":["city","district","latitude","longitude"]},"InputCreatePromiseDTO":{"type":"object","properties":{"title":{"type":"string","maxLength":50,"example":"새로운 약속"},"themeIds":{"example":[1],"type":"array","items":{"type":"number","minimum":1}},"promisedAt":{"type":"string","example":"2024-03-23T06:47:21Z"},"destinationType":{"enum":["STATIC","DYNAMIC"],"type":"string","example":"STATIC"},"destination":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/InputLocationDTO"}]},"locationShareStartType":{"enum":["DISTANCE","TIME"],"type":"string","example":"TIME"},"locationShareStartValue":{"type":"number","minimum":0,"example":5},"locationShareEndType":{"enum":["DISTANCE","TIME"],"type":"string","example":"DISTANCE"},"locationShareEndValue":{"type":"number","minimum":0,"example":5}},"required":["title","themeIds","promisedAt","destinationType","destination","locationShareStartType","locationShareStartValue","locationShareEndType","locationShareEndValue"]},"InputUpdatePromiseDTO":{"type":"object","properties":{"title":{"type":"string","maxLength":50,"example":"새로운 약속"},"themeIds":{"example":[1],"type":"array","items":{"type":"number","minimum":1}},"promisedAt":{"type":"string","example":"2024-03-23T06:47:21Z"},"destinationType":{"enum":["STATIC","DYNAMIC"],"type":"string","example":"STATIC"},"destination":{"nullable":true,"allOf":[{"$ref":"#/components/schemas/InputLocationDTO"}]},"locationShareStartType":{"enum":["DISTANCE","TIME"],"type":"string","example":"TIME"},"locationShareStartValue":{"type":"number","minimum":0,"example":5},"locationShareEndType":{"enum":["DISTANCE","TIME"],"type":"string","example":"DISTANCE"},"locationShareEndValue":{"type":"number","minimum":0,"example":5}},"required":["title","themeIds","promisedAt","destinationType","destination","locationShareStartType","locationShareStartValue","locationShareEndType","locationShareEndValue"]},"ThemeDTO":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"}},"required":["id","name"]},"OutputUploadFileDTO":{"type":"object","properties":{"url":{"type":"string"}},"required":["url"]}}},"externalDocs":{"description":"OpenAPI Specification (JSON)","url":"/api-json"}}